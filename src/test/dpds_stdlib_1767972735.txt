// duckyPad duckyScript Standard Library
// https://github.com/duckyPad/DPDS-Standard-Library

// Comment Template:
// --------------------
REM_BLOCK
    Author:
        dekuNukem
    Description:
        What does it do, how to use.
    Args:
        If any
    Returns:
        If any
    Additional Notes:
        If any
END_REM
// define func here

// --------------------
REM_BLOCK
    Author:
        dekuNukem
    Description:
        Waits for a specific key to be pressed
        Any other keypresses are ignored
    Args:
        key_id: The ID of the key to wait for (1-20 for keys, etc).
    Returns:
        None
    Additional Notes:
        None
END_REM
FUN WAITKEY(key_id)
    BCLR
    WHILE 1
        IF _BLOCKING_READKEY == key_id
            RETURN
        END_IF
    END_WHILE
END_FUN

// --------------------
REM_BLOCK
    Author:
        dekuNukem
    Description:
        Fills a block of memory with byte value
    Args:
        addr: Starting address
        value: Byte value (0-255) to write.
        length: Number of bytes to write.
    Returns:
        None
    Additional Notes:
        Address should be within scratch memory
END_REM
FUN MEMSET(addr, value, length)
    VAR i = 0
    WHILE i < length
        POKE8(addr + i, value)
        i = i + 1
    END_WHILE
END_FUN

// --------------------
REM_BLOCK
    Author:
        dekuNukem
    Description:
        Returns the smaller of two numbers.
    Args:
        a: First number
        b: Second number
    Returns:
        The smaller value between a and b.
    Additional Notes:
        Result is affected by the current _UNSIGNED_MATH mode.
END_REM
FUN MIN(a, b)
    IF a < b
        RETURN a
    END_IF
    RETURN b
END_FUN

// --------------------
REM_BLOCK
    Author:
        dekuNukem
    Description:
        Returns the larger of two numbers.
    Args:
        a: First number
        b: Second number
    Returns:
        The larger value between a and b.
    Additional Notes:
        Result is affected by the current _UNSIGNED_MATH mode.
END_REM
FUN MAX(a, b)
    IF a > b
        RETURN a
    END_IF
    RETURN b
END_FUN

// --------------------
REM_BLOCK
    Author:
        dekuNukem
    Description:
        Returns the absolute (positive) value of a number.
    Args:
        n: The input integer.
    Returns:
        The absolute value of n.
    Additional Notes:
        Works with both math modes
END_REM
FUN ABS(n)
    IF _UNSIGNED_MATH == 1
        RETURN n
    END_IF
    
    IF n < 0
        RETURN n * -1
    END_IF
    
    RETURN n
END_FUN

// --------------------
REM_BLOCK
    Author:
        dekuNukem
    Description:
        Copies n bytes starting from address `src` to address `dest`
    Args:
        dest: Destination memory address
        src: Source memory address
        n: Number of bytes to copy
    Returns:
        None
    Additional Notes:
        Does NOT handle overlapping memory regions.
END_REM
FUN MEMCPY(dest, src, n)
    VAR i = 0
    WHILE i < n
        POKE8(dest + i, PEEK8(src + i))
        i += 1
    END_WHILE
END_FUN